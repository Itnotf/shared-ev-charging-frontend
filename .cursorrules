# 澜充小站项目 Cursor AI 精简规则

## 项目与技术
- uni-app 移动端应用（Vue2/3），橙色主题卡片式设计。
- 技术栈：Vue2/3 + uni-app + SCSS + ES6+。

## 目录结构
```
/api/           接口封装（按业务分模块）
/components/    通用组件（Common/Base 前缀）
/config/        配置（环境、常量）
/pages/         页面（按功能模块分组）
/utils/         工具函数（保持纯函数）
/static/        静态资源
/uni_modules/   uni-app 插件
```

## 命名约定
- 文件/目录：kebab-case（`record-detail.vue`）
- 组件：PascalCase（`BaseGroupItem`）
- 函数/变量：camelCase（`getUserProfile`）
- 常量：UPPER_SNAKE_CASE（`API_BASE_URL`）
- CSS 类名：kebab-case（`.time-slot`）

## 开发约定
- 组件结构：template → script → style；按标准选项顺序。
- 样式：必须引入 `@/uni.scss`；仅用设计系统变量；禁止硬编码颜色/尺寸。
- Props：必须声明类型与默认值。
- JS：优先 async/await；所有异步必须有 try-catch 或 .catch()。
- 跳转：统一使用 `@/utils` 的 `goTo`。

## API 约定
- 仅使用从 `@/api/index.js` 导出的 `http`；禁止直接 `uni.request`。
- 接口按业务模块拆分（如 `auth.js`, `record.js`, `reservation.js`）。
- 统一错误处理，提供异常兜底与提示回传。

## 业务与工具
- 认证：使用 `@/utils` 的 `userAuth`。
- 时间/金额：统一工具（金额分转元，金额保留 2 位并千分位）。
- 图片：统一图片工具；注意压缩与缓存。
- 数据：数组/对象安全处理，避免可空陷阱。

## 禁止与不推荐
- 绝对禁止：
  - 直接 `uni.request`；硬编码颜色/尺寸；组件内直接 `uni.showToast`；在 `utils` 中写 UI 相关代码；忽略异步错误。
- 强烈不推荐：
  - 页面内直接写卡片/按钮样式；重复业务逻辑；单个方法 > 50 行；条件嵌套 > 3 层。

## 性能
- 图片压缩与缓存；列表使用稳定 `key`；页面卸载时清理资源。

## 注释与提交
- 复杂业务需注释；API 注释参数与返回；工具函数用 JSDoc。
- 提交使用 Conventional Commits：`type(scope): description`（feat/fix/refactor/style/docs/perf/test/chore）。

---

## UI 风格基线（精简）
- 主题与颜色：
  - 主 CTA 颜色由 `$uni-color-primary` 提供；中性文本/语义色按变量使用。
  - 页面背景浅灰或 `$bg`；卡片统一白底。
- 必用组件与默认：
  - `components/PageHero.vue`：建议 `<PageHero :height="260" bgClass="gradient-purple" />`
  - `components/PageContent.vue`：`overlap=true`，`overlapOffset=24`，`padding='0 24rpx 40rpx'`
  - `components/HeroCard.vue`：白底、圆角、统一内边距；重要信息卡可加 `high` 保持高度一致。
- KPI/数据：数值与单位同一行基线；金额保留 2 位并千分位。
- 宫格：2 列、`gap=24rpx`；白底浅阴影，背景可用 `$main-color-bg1~bg3`。
- 间距与一致性：左右 `24rpx`；区块/卡片间距 20–28rpx；英雄区与首卡距离由 `overlapOffset` 控制。
- 交互：每页仅一个主 CTA（橙色渐变按钮）；避免彩色边条或重阴影。

> 更多细节与示例：参见 `/docs/coding-standards.md`。
