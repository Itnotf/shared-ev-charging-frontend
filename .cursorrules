# æ¾œå……å°ç«™é¡¹ç›® Cursor AI ç¼–ç¨‹è§„åˆ™

## é¡¹ç›®æ¦‚è¿°
- **é¡¹ç›®ç±»å‹**: uni-app Vue2/3 å…¼å®¹ç§»åŠ¨ç«¯åº”ç”¨ï¼ˆå……ç”µæ¡©å…±äº«é¢„çº¦ç³»ç»Ÿï¼‰
- **ä¸»è¦æŠ€æœ¯æ ˆ**: Vue2/3 + uni-app + SCSS + JavaScript ES6+
- **ç›®æ ‡å¹³å°**: å¾®ä¿¡å°ç¨‹åºã€App
- **UI é£æ ¼**: æ©™è‰²ä¸»é¢˜ï¼ˆ#FFA500ï¼‰ç°ä»£å¡ç‰‡å¼è®¾è®¡

## æ ¸å¿ƒæ¶æ„åŸåˆ™

### ç›®å½•ç»“æ„è§„èŒƒ
```
/api/           - æ¥å£å°è£…å±‚ï¼ŒæŒ‰ä¸šåŠ¡æ¨¡å—åˆ†æ–‡ä»¶
/components/    - é€šç”¨ç»„ä»¶ï¼Œä»¥Common/Baseå‰ç¼€å‘½å
/config/        - é…ç½®æ–‡ä»¶ï¼ˆç¯å¢ƒã€å¸¸é‡ï¼‰
/pages/         - é¡µé¢ï¼ŒæŒ‰åŠŸèƒ½æ¨¡å—åˆ†ç»„
/utils/         - å·¥å…·å‡½æ•°ï¼Œçº¯å‡½æ•°ä¼˜å…ˆ
/static/        - é™æ€èµ„æº
/uni_modules/   - uni-appæ’ä»¶
```

### å‘½åçº¦å®š
- **æ–‡ä»¶/ç›®å½•**: kebab-case (`user-manage.vue`, `record-detail.vue`)
- **Vueç»„ä»¶**: PascalCase (`BaseGroupItem`, `CommonCard`)
- **å‡½æ•°/å˜é‡**: camelCase (`getUserProfile`, `selectedDate`)
- **å¸¸é‡**: UPPER_SNAKE_CASE (`TIMESLOTS`, `API_BASE_URL`)
- **CSSç±»å**: kebab-case (`.record-item`, `.time-slot`)

## ä»£ç é£æ ¼è§„èŒƒ

### Vue ç»„ä»¶è§„èŒƒ
1. **ç»„ä»¶ç»“æ„é¡ºåº**:
   ```vue
   <template>
   <!-- æ¨¡æ¿å†…å®¹ -->
   </template>

   <script>
   // importè¯­å¥
   // export defaultç»„ä»¶é€‰é¡¹
   </script>

   <style lang="scss">
   // æ ·å¼ï¼Œå¿…é¡»ä½¿ç”¨scsså¹¶å¼•å…¥uni.scss
   </style>
   ```

2. **ç»„ä»¶é€‰é¡¹é¡ºåº**:
   ```javascript
   export default {
     name: 'ComponentName',        // ç»„ä»¶å
     components: {},               // å­ç»„ä»¶
     props: {},                   // å±æ€§
     data() { return {} },        // æ•°æ®
     computed: {},                // è®¡ç®—å±æ€§
     watch: {},                   // ä¾¦å¬å™¨
     onLoad() {},                 // ç”Ÿå‘½å‘¨æœŸï¼ˆuni-appï¼‰
     onShow() {},
     mounted() {},                // ç”Ÿå‘½å‘¨æœŸï¼ˆVueï¼‰
     methods: {}                  // æ–¹æ³•
   }
   ```

3. **Props å®šä¹‰**: å¿…é¡»æŒ‡å®šç±»å‹å’Œé»˜è®¤å€¼
   ```javascript
   props: {
     title: {
       type: String,
       default: ''
     },
     showBack: {
       type: Boolean,
       default: true
     }
   }
   ```

### JavaScript ç¼–ç è§„èŒƒ
1. **ä¼˜å…ˆä½¿ç”¨ ES6+ è¯­æ³•**: è§£æ„èµ‹å€¼ã€ç®­å¤´å‡½æ•°ã€async/await
2. **é”™è¯¯å¤„ç†**: æ‰€æœ‰å¼‚æ­¥æ“ä½œå¿…é¡»æœ‰ try-catch æˆ– .catch()
3. **å‡½æ•°è®¾è®¡**: å•ä¸€èŒè´£ï¼Œçº¯å‡½æ•°ä¼˜å…ˆï¼Œé¿å…å‰¯ä½œç”¨
4. **å˜é‡å£°æ˜**: ä¼˜å…ˆä½¿ç”¨ constï¼Œå¿…è¦æ—¶ç”¨ letï¼Œç¦ç”¨ var

### æ ·å¼è§„èŒƒ
1. **å¿…é¡»å¼•å…¥ä¸»é¢˜**: æ¯ä¸ª `<style>` éƒ½è¦ `@import '@/uni.scss'`
2. **ä½¿ç”¨è®¾è®¡ç³»ç»Ÿå˜é‡**:
   ```scss
   // ä¸»è‰²è°ƒ
   color: $main-color;           // #FFA500
   background: $main-color-light; // #FFB84D
   
   // å¡ç‰‡æ ·å¼
   border-radius: $card-radius;   // 28rpx
   box-shadow: $card-shadow;      // ç»Ÿä¸€é˜´å½±
   
   // é—´è·
   margin: $card-margin;          // 20rpx
   padding: $uni-spacing-row-base; // 30rpx
   ```

3. **ç¦æ­¢ç¡¬ç¼–ç **: ä¸å…è®¸ç›´æ¥å†™ `#FFA500`ã€`20rpx` ç­‰é­”æ³•æ•°å­—
4. **å“åº”å¼å•ä½**: ä¼˜å…ˆä½¿ç”¨ `rpx`ï¼Œæ–‡å­—å¯ç”¨ `rpx` æˆ– `px`

## API æ¥å£è§„èŒƒ

### ç»Ÿä¸€è¯·æ±‚å°è£…
1. **å¿…é¡»ä½¿ç”¨ `http` å‡½æ•°**: ä» `@/api/index.js` å¯¼å…¥
   ```javascript
   // âœ… æ­£ç¡®
   import { http } from '@/api/index.js';
   export const getUserProfile = () => http({
     url: '/api/users/profile',
     method: 'GET'
   });

   // âŒ é”™è¯¯ - ä¸è¦ç›´æ¥ç”¨uni.request
   uni.request({ url: '/api/users/profile' })
   ```

2. **æ¨¡å—åŒ–ç»„ç»‡**: æŒ‰ä¸šåŠ¡åˆ†æ–‡ä»¶ï¼ˆ`auth.js`, `record.js`, `reservation.js`ï¼‰

3. **å“åº”å¤„ç†è§„èŒƒ**:
   ```javascript
   // æ¥å£è¿”å›å·²ç»æ˜¯ res.dataï¼Œç›´æ¥ä½¿ç”¨
   const res = await getUserProfile();
   this.userInfo = res.data || res; // å…¼å®¹ä¸åŒåç«¯è¿”å›æ ¼å¼
   ```

### é”™è¯¯å¤„ç†æ¨¡å¼
```javascript
// é¡µé¢ä¸­çš„æ ‡å‡†å¼‚æ­¥è°ƒç”¨æ¨¡å¼
async loadData() {
  uni.showLoading({ title: 'åŠ è½½ä¸­' });
  try {
    const res = await getRecords();
    this.records = Array.isArray(res.data) ? res.data : [];
  } catch (error) {
    uni.showToast({ title: 'åŠ è½½å¤±è´¥', icon: 'none' });
    console.error('åŠ è½½è®°å½•å¤±è´¥:', error);
  } finally {
    uni.hideLoading();
  }
}
```

## é€šç”¨ç»„ä»¶ä½¿ç”¨è§„èŒƒ

### å¼ºåˆ¶ä½¿ç”¨ç»Ÿä¸€ç»„ä»¶

1. **å¡ç‰‡å®¹å™¨**: ä½¿ç”¨ `CommonCard`
   ```vue
   <CommonCard customClass="my-card">
     <!-- å†…å®¹ -->
   </CommonCard>
   ```

2. **åˆ—è¡¨é¡¹**: ä½¿ç”¨ `BaseGroup` + `BaseGroupItem`
   ```vue
   <BaseGroup>
     <BaseGroupItem 
       icon="user" 
       title="ä¸ªäººä¿¡æ¯" 
       @click="goToProfile"
       rightIcon="right"
     />
   </BaseGroup>
   ```

### ç»Ÿä¸€è·³è½¬æ–¹æ³•
```javascript
// å¿…é¡»ä½¿ç”¨ utils ä¸­çš„ goToï¼Œè‡ªåŠ¨å¤„ç† tabBar
import { goTo } from '@/utils';
goTo('/pages/profile/index'); // è‡ªåŠ¨åˆ¤æ–­ç”¨ switchTab è¿˜æ˜¯ navigateTo
```

## ä¸šåŠ¡é€»è¾‘è§„èŒƒ

### ç”¨æˆ·è®¤è¯å¤„ç†
```javascript
// ä½¿ç”¨ç»Ÿä¸€çš„è®¤è¯å·¥å…·
import { userAuth } from '@/utils';

// æ£€æŸ¥ç™»å½•çŠ¶æ€
if (!userAuth.check()) {
  goTo('/pages/login/login');
  return;
}

// è·å–ç”¨æˆ·ä¿¡æ¯
const auth = userAuth.get();
if (auth) {
  const { token, userInfo } = auth;
}
```

### å›¾ç‰‡å¤„ç†è§„èŒƒ
```javascript
// ä½¿ç”¨ç»Ÿä¸€çš„å›¾ç‰‡å·¥å…·
import { getAvatarUrl, getRecordImageUrl, compressImage } from '@/utils';

// å¤´åƒæ˜¾ç¤º
:src="getAvatarUrl(userInfo.avatar)"

// è®°å½•å›¾ç‰‡æ˜¾ç¤º  
:src="getRecordImageUrl(record.image_url)"

// å›¾ç‰‡å‹ç¼©ä¸Šä¼ 
const compressedPath = await compressImage(filePath, 0.8);
```

### æ—¶é—´æ ¼å¼åŒ–
```javascript
// ä½¿ç”¨ç»Ÿä¸€å·¥å…·
import { formatDate, getCurrentDate } from '@/utils';

formatDate(record.date, 'YYYYå¹´MMæœˆDDæ—¥');
getCurrentDate('YYYY-MM');
```

## é¡µé¢å¼€å‘è§„èŒƒ

### ç”Ÿå‘½å‘¨æœŸä½¿ç”¨
```javascript
export default {
  async onLoad(options) {
    // é¡µé¢å‚æ•°å¤„ç†
    if (options.id) {
      this.recordId = options.id;
    }
  },
  
  onShow() {
    // æ¯æ¬¡æ˜¾ç¤ºéƒ½éœ€è¦åˆ·æ–°çš„æ•°æ®
    this.loadUserInfo();
  },
  
  onUnload() {
    // æ¸…ç†å®šæ—¶å™¨ã€äº‹ä»¶ç›‘å¬ç­‰
    if (this.pollingTimer) {
      clearInterval(this.pollingTimer);
    }
  }
}
```

### æ•°æ®å¤„ç†è§„èŒƒ
```javascript
// é‡‘é¢å¤„ç†ï¼šåç«¯è¿”å›åˆ†ï¼Œå‰ç«¯æ˜¾ç¤ºå…ƒ
amount: (Number(res.data.amount) / 100).toFixed(2)

// æ•°ç»„å®‰å…¨å¤„ç†
this.records = Array.isArray(res.data) ? res.data : [];

// å¯¹è±¡å®‰å…¨å¤„ç†
const userInfo = res.data || {};
```

## ç¦æ­¢äº‹é¡¹

### ç»å¯¹ç¦æ­¢
- âŒ ç›´æ¥ä½¿ç”¨ `uni.request`ï¼ˆé™¤éç‰¹æ®Šéœ€æ±‚ï¼‰
- âŒ ç¡¬ç¼–ç é¢œè‰²å€¼ï¼ˆå¦‚ `#FFA500`ï¼‰
- âŒ ç¡¬ç¼–ç å°ºå¯¸ï¼ˆå¦‚ `20px`ã€`30rpx`ï¼‰
- âŒ åœ¨ç»„ä»¶ä¸­ç›´æ¥è°ƒç”¨ `uni.showToast`ï¼ˆåº”é€šè¿‡ emit æˆ– propsï¼‰
- âŒ åœ¨ `utils` ä¸­å†™ UI ç›¸å…³ä»£ç ï¼ˆåº”ä¿æŒçº¯å‡½æ•°ï¼‰
- âŒ ä¸å¤„ç†å¼‚æ­¥æ“ä½œçš„é”™è¯¯æƒ…å†µ

### å¼ºçƒˆä¸æ¨è
- ğŸš«  åœ¨é¡µé¢ä¸­ç›´æ¥å†™å¡ç‰‡/æŒ‰é’®æ ·å¼ï¼ˆåº”ä½¿ç”¨é€šç”¨ç»„ä»¶ï¼‰
- ğŸš«  é‡å¤çš„ä¸šåŠ¡é€»è¾‘ï¼ˆåº”æå–åˆ° utils æˆ– mixinsï¼‰
- ğŸš«  è¿‡é•¿çš„æ–¹æ³•ï¼ˆå•ä¸ªæ–¹æ³•è¶…è¿‡ 50 è¡Œéœ€è¦æ‹†åˆ†ï¼‰
- ğŸš«  æ·±å±‚åµŒå¥—çš„æ¡ä»¶åˆ¤æ–­ï¼ˆè¶…è¿‡ 3 å±‚éœ€è¦é‡æ„ï¼‰

## æ€§èƒ½ä¼˜åŒ–è§„èŒƒ

### å›¾ç‰‡ä¼˜åŒ–
```javascript
// å›¾ç‰‡å‹ç¼©
const compressedPath = await compressImage(filePath, 0.8);

// å›¾ç‰‡ç¼“å­˜
const cachedUrl = await fetchAndCacheImage(imageUrl);
```

### åˆ—è¡¨æ¸²æŸ“
```vue
<!-- ä½¿ç”¨ key ä¼˜åŒ–æ¸²æŸ“ -->
<view v-for="item in list" :key="item.id" class="list-item">
  {{ item.name }}
</view>
```

### å†…å­˜ç®¡ç†
```javascript
// é¡µé¢å¸è½½æ—¶æ¸…ç†èµ„æº
onUnload() {
  // æ¸…ç†å®šæ—¶å™¨
  if (this.timer) clearInterval(this.timer);
  
  // æ¸…ç†äº‹ä»¶ç›‘å¬
  uni.offNetworkStatusChange();
}
```

## ä»£ç æ³¨é‡Šè§„èŒƒ
- å¤æ‚ä¸šåŠ¡é€»è¾‘å¿…é¡»æ·»åŠ æ³¨é‡Š
- API æ¥å£å¿…é¡»æ³¨é‡Šå‚æ•°å’Œè¿”å›å€¼
- å·¥å…·å‡½æ•°å¿…é¡»ä½¿ç”¨ JSDoc æ ¼å¼

```javascript
/**
 * è®¡ç®—å……ç”µè´¹ç”¨
 * @param {number} kwh - å……ç”µåº¦æ•°
 * @param {number} unitPrice - å•ä»·ï¼ˆå…ƒ/kWhï¼‰
 * @returns {string} æ ¼å¼åŒ–çš„é‡‘é¢å­—ç¬¦ä¸²
 */
export const calculateAmount = (kwh, unitPrice) => {
  if (!kwh) return '0.00';
  return (parseFloat(kwh) * unitPrice).toFixed(2);
};
```

## æµ‹è¯•è§„èŒƒ
- æ‰€æœ‰å·¥å…·å‡½æ•°åº”è¯¥å¯æµ‹è¯•ï¼ˆçº¯å‡½æ•°ï¼‰
- é¡µé¢æ–¹æ³•åº”é¿å…ç›´æ¥æ“ä½œ DOM
- å¼‚æ­¥æ“ä½œå¿…é¡»æœ‰é”™è¯¯å¤„ç†æµ‹è¯•è·¯å¾„

## æäº¤ä¿¡æ¯è§„èŒƒ

### Commit Message è‡ªåŠ¨ç”Ÿæˆ
- **æ¯æ¬¡ä¿®æ”¹å®Œæˆå**ï¼šå¿…é¡»ç”Ÿæˆç¬¦åˆ Conventional Commits çš„è‹±æ–‡æäº¤ä¿¡æ¯
- **æ ¼å¼è¦æ±‚**ï¼šä½¿ç”¨ `type(scope): description` æ ¼å¼
- **å¸¸ç”¨ç±»å‹**ï¼š
  - `feat`: æ–°åŠŸèƒ½
  - `fix`: ä¿®å¤bug
  - `refactor`: é‡æ„ä»£ç 
  - `style`: æ ·å¼è°ƒæ•´
  - `docs`: æ–‡æ¡£æ›´æ–°
  - `perf`: æ€§èƒ½ä¼˜åŒ–
  - `test`: æµ‹è¯•ç›¸å…³
  - `chore`: æ„å»º/å·¥å…·é“¾ç›¸å…³
- **ç¤ºä¾‹æ ¼å¼**ï¼š
  ```
  feat(user): add avatar upload functionality
  
  - Implement image compression and upload
  - Add avatar preview in profile page
  - Update user info API integration
  
  Closes #123
  ```

## æ–‡æ¡£æ›´æ–°è§„èŒƒ

### æ¯æ¬¡ä»£ç æ›´æ–°åå¿…é¡»æ£€æŸ¥çš„æ–‡æ¡£
1. **README.md** å’Œ **README_CN.md**ï¼š
   - æ›´æ–°åŠŸèƒ½ç‰¹æ€§è¯´æ˜
   - æ·»åŠ æ–°çš„APIæ¥å£æ–‡æ¡£
   - æ›´æ–°æ¶æ„å˜æ›´è¯´æ˜
   - åŒæ­¥æœ€æ–°ç‰ˆæœ¬æ›´æ–°æ—¥å¿—

2. **uni_modules_list.md**ï¼š
   - æ–°å¢/åˆ é™¤ uni_modules æ’ä»¶æ—¶åŒæ­¥æ›´æ–°
   - ç¡®ä¿ä¾èµ–æ¸…å•ä¸å®é™…ä½¿ç”¨ä¿æŒä¸€è‡´

3. **.cursorrules**ï¼š
   - æ–°å¢ç¼–ç è§„èŒƒæ—¶åŠæ—¶æ›´æ–°
   - ä¿®æ”¹æ¶æ„åŸåˆ™æ—¶åŒæ­¥æ–‡æ¡£

### æ–‡æ¡£æ›´æ–°æ£€æŸ¥æ¸…å•
- [ ] API å˜æ›´ï¼šæ–°å¢æ¥å£åœ¨ README ä¸­æœ‰è¯´æ˜
- [ ] æ¶æ„è°ƒæ•´ï¼šç›®å½•ç»“æ„ã€ç»„ä»¶å±‚æ¬¡å˜åŒ–å·²æ›´æ–°
- [ ] åŠŸèƒ½ç‰¹æ€§ï¼šæ–°åŠŸèƒ½åœ¨ä¸»è¦é¡µé¢ç« èŠ‚ä¸­æœ‰ä½“ç°
- [ ] æ ·å¼è§„èŒƒï¼šä¸»é¢˜è‰²ã€token åŒ–ç­‰å˜æ›´å·²è¯´æ˜
- [ ] å·¥å…·å‡½æ•°ï¼šæ–°å¢ utils å‡½æ•°æœ‰ä½¿ç”¨è¯´æ˜
- [ ] æ’ä»¶ä¾èµ–ï¼šuni_modules å˜æ›´å·²åŒæ­¥
- [ ] ç‰ˆæœ¬æ—¥å¿—ï¼šé‡è¦æ›´æ–°æ·»åŠ åˆ°æ›´æ–°æ—¥å¿—ä¸­

### æ–‡æ¡£æ›´æ–°æ“ä½œå›ºåŒ–
æ¯æ¬¡å®Œæˆä»£ç é‡æ„ã€åŠŸèƒ½å¼€å‘ã€æ¶æ„è°ƒæ•´åï¼Œå¿…é¡»æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š
```bash
# 1. æ£€æŸ¥å¹¶æ›´æ–°æ–‡æ¡£å†…å®¹
# 2. ç¡®ä¿ä¸­è‹±æ–‡æ–‡æ¡£åŒæ­¥
# 3. è¿è¡Œæ ¼å¼æ£€æŸ¥
npm run format
# 4. æäº¤æ—¶åŒ…å«æ–‡æ¡£æ›´æ–°
```

---

éµå¾ªä»¥ä¸Šè§„èŒƒï¼Œç¡®ä¿ä»£ç è´¨é‡ã€ç»´æŠ¤æ€§å’Œå›¢é˜Ÿåä½œæ•ˆç‡ã€‚åœ¨ç¼–å†™ä»£ç æ—¶ï¼Œä¼˜å…ˆè€ƒè™‘å¤ç”¨æ€§ã€å¯è¯»æ€§å’Œæ€§èƒ½ã€‚æ–‡æ¡£ä¸ä»£ç åŒæ­¥æ›´æ–°ï¼Œä¿æŒé¡¹ç›®ä¿¡æ¯çš„å‡†ç¡®æ€§å’Œæ—¶æ•ˆæ€§ã€‚
